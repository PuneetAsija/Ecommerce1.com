'use strict';mix_d("SoftlinesOutfitBuilderCardsSources__softlines-desktop-outfit-builder-card:softlines-desktop-outfit-builder-card__f1l2Ip38","exports tslib @c/dom @c/aui-carousel @p/A @c/metrics @c/navigation @p/a-carousel-framework @c/scoped-dom @c/remote-operations @c/browser-operations @c/aui-modal @c/aui-untrusted-ajax".split(" "),function(K,p,L,Y,Z,v,aa,ba,ca,da,ea,fa,ha){function z(a){return a&&"object"===typeof a&&"default"in a?a:{"default":a}}var A=z(L),M=z(Y),c=z(Z),G=z(aa),ia=z(ba),N=
z(ca),ja=z(da),O=z(ea),ka=z(fa),la=z(ha),C=function(a,b){return a.querySelector("[class*="+b+"]")},ma=function(a,b,d){a=JSON.parse(a);a.adCreativeMetaData=b.adCreativeMetaData;a.feedbackFormContainerId=d;return encodeURI(JSON.stringify(a))},na=function(a,b,d,e){return p.__awaiter(void 0,void 0,void 0,function(){var f,h,k,n,t,y,q,w;return p.__generator(this,function(l){f="adFeedbackModal_"+a;l=(null===(w=C(b,"ad-feedback-modal-container"))||void 0===w?void 0:w.className)||"";h="."+b.className+" ."+
l.replace(" ",".");n=(k=d().adCreativeMetaData.adCreativeDetails)?k.length:0;t=b.dataset.deviceType||"desktop";l=Math.max(560,125*n+130);var u=n;var x=t;u=e&&"true"===e.toLowerCase()?2>u?605:810:"tablet"==x?2>u?545:775:2>u?430:645;y={a11yOpenMessage:"",width:l,height:u};try{return q=ka["default"].create(f,h,y),[2,q]}catch(D){throw v.count("adfeedback:cards:clientDesktop:modalCreation:failure",1),Error("Modal Creation Failed : "+D);}})})},qa=function(a,b,d,e,f,h){var k="rtl"===document.getElementsByTagName("html")[0].dir?
"ad-feedback-loading-spinnner-rtl":"ad-feedback-loading-spinnner";var n=C(A["default"].cardRoot,k);a.on("beforeShow",function(){return p.__awaiter(void 0,void 0,void 0,function(){var t;return p.__generator(this,function(y){switch(y.label){case 0:return t=oa(a,b,d),[4,a.render(function(q){var w="250px",l=d().adCreativeMetaData.adCreativeDetails;l&&2>l.length&&(w="150px");n.style.marginTop=w;q.innerHTML="";w=q.appendChild;l=document.getElementsByTagName("html")[0].dir;var u=A["default"].createElement("div"),
x=A["default"].createElement("div");u.innerHTML=f;"rtl"===l?(u.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 28px; margin-right: 0px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 0px; padding-right: 25px; padding-top: 16px; text-align: right; text-rendering: optimizelegibility; visibility: visible;'),x.setAttribute("style",
'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to left, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: right; visibility: visible; z-index: 10;')):
(u.setAttribute("style",'box-sizing: border-box; color: rgb(15, 17, 17); font-family: "Amazon Ember", Arial, sans-serif; font-size: 16px; font-weight: 700; line-height: 24px; margin-bottom: 0px; margin-left: 0px; margin-right: 28px; margin-top: 0px; min-height: 56px; padding-bottom: 16px; padding-left: 25px; padding-right: 0px; padding-top: 16px; text-align: left; text-rendering: optimizelegibility; visibility: visible;'),x.setAttribute("style",'background-attachment: scroll; background-clip: border-box; background-color: rgb(240, 242, 242); background-image: linear-gradient(to right, #EFEFEF 66.72%, #FFFFFF); background-origin: padding-box; background-position: 0% 0%; background-position-x: 0%; background-position-y: 0%; background-repeat: repeat; background-size: auto; border-bottom-color: rgb(213, 217, 217); border-bottom-left-radius: 0px; border-bottom-right-radius: 0px; border-top-left-radius: 8px; border-top-right-radius: 8px; box-sizing: border-box; color: rgb(15, 17, 17); display: block; font-family: "Amazon Ember", Arial, sans-serif; font-size: 14px; line-height: 20px; margin-bottom: 0px; margin-left: 0px; margin-right: 0px; margin-top: 0px; padding-bottom: 0px; padding-left: 24px; padding-right: 24px; padding-top: 0px; position: relative; text-align: left; visibility: visible; z-index: 10;'));
x.appendChild(u);w.call(q,x);w=document.getElementsByTagName("html")[0].dir;l=A["default"].createElement("div");"rtl"===w?l.setAttribute("style","padding-bottom: 16px; padding-right: 50px ; padding-top: 16px; justify-content: center; align-items: center;"):l.setAttribute("style","padding-bottom: 16px; padding-left: 50px ; padding-top: 16px; justify-content: center; align-items: center;");pa(n,l,e,t,h);q.appendChild(l)})];case 1:return y.sent(),[2]}})})})},oa=function(a,b,d){d=d();var e=d.adCreativeMetaData.adCreativeDetails;
null===e||void 0===e?void 0:e.sort(function(f,h){return f.adCreativeIndex<h.adCreativeIndex?-1:1});return ma(b,d,a.id)},pa=function(a,b,d,e,f){b.appendChild(a);"function"==typeof v.uet&&v.uet("bb","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});la["default"].post("/af/multi-creative/feedback-form",{accepts:"application/json",contentType:"application/json",additionalHeaders:{"Accept-Language":""===d?"en-US":d}},{pl:e,deviceType:"desktop"}).then(function(h){return p.__awaiter(void 0,
void 0,void 0,function(){var k,n,t;return p.__generator(this,function(y){"function"==typeof v.uet&&v.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});v.count("adfeedback:cards:clientDesktop:fetchFormContent:success",1);k=A["default"].createElement("div");k.innerHTML=String(h.responseBody);for(n=0;n<k.children.length;++n)t=k.children[n],"SCRIPT"===t.tagName?H("script",t,b):"LINK"===t.tagName?H("link",t,b):H("div",t,b);b.removeChild(a);return[2]})})}).catch(function(){"function"==
typeof v.uet&&v.uet("be","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1});v.count("adfeedback:cards:clientDesktop:fetchFormContent:failure",1);b.innerHTML=f});"function"==typeof v.uex&&v.uex("ld","adfeedback:cards:clientDesktop:fetchFormContent:time",{wb:1})},H=function(a,b,d){var e=A["default"].createElement(a);e.innerHTML=b.innerHTML;b.getAttributeNames().forEach(function(f){e.setAttribute(f,b.getAttribute(f)||"")});d.appendChild(e)},P={},ra=function(a,b){return p.__awaiter(void 0,
void 0,void 0,function(){var d,e,f,h,k,n,t,y,q;return p.__generator(this,function(w){d=C(a,"ad-feedback-primary-link");e=b().adFeedbackLabelId;f=O["default"].setup();h="open-modal"+e;k=b().adCreativeMetaData.adCreativeDetails;n=a.dataset;t=n.isDsaEnabled;y=n.weblabTreatment;q=String(t);"undefined"===q&&(q=k&&0<k.length?k[0].selectionSignals?"true":"false":"false");"true"===q&&"T1"!==y&&(q="false");f.attach(h,d);f.define(h,"click",function(){return p.__awaiter(void 0,void 0,void 0,function(){var l;
return p.__generator(this,function(u){switch(u.label){case 0:return(l=P[e])?[3,2]:[4,na(e,a,b,q)];case 1:l=u.sent();var x=a.dataset,D=x.formHeaderText,E=x.dsaFormHeaderText;qa(l,x.adFeedbackPayload,b,x.currentLocale,"true"===q?E:D,x.formLoadErrorText);P[e]=l;u.label=2;case 2:return l.show(),[2]}})})});return[2]})})},sa=function(a,b){var d=O["default"].setup(),e="mouse-enter"+b;b="mouse-leave"+b;var f=C(a,"ad-feedback-primary-link"),h=C(a,"ad-feedback-text-desktop"),k=C(a,"ad-feedback-sprite");d.attach(e,
f);d.define(e,"mouseenter",function(){k.style.backgroundPosition="0px -12px";h.style.color="#111111"});d.attach(b,f);d.define(b,"mouseleave",function(){k.style.backgroundPosition="0px 0px";h.style.color="#555"})},ta=function(a){return p.__awaiter(void 0,void 0,void 0,function(){var b,d,e,f;return p.__generator(this,function(h){switch(h.label){case 0:return h.trys.push([0,3,,4]),b=a(),d=N["default"].cardRoot.getElementsByClassName("adFeedbackMainComponent_"+b.adFeedbackLabelId)[0],e=d.dataset.isSponsoredLabelActive,
"false"===(e||"false").toLowerCase()?[2]:[4,sa(d,b.adFeedbackLabelId)];case 1:return h.sent(),[4,ra(d,a)];case 2:return h.sent(),[3,4];case 3:throw f=h.sent(),v.count("adfeedback:cards:clientDesktop:enableAdFeedback:failure",1),Error("Failed to call enableAdFeedback for desktop client : "+f);case 4:return[2]}})})},Q=function(a){return"undefined"!==c["default"].$.type(a)&&"null"!==c["default"].$.type(a)&&"string"===c["default"].$.type(a)&&0<a.length},ua=function(a,b){var d,e=/^[A-Z0-9]*$/;Q(a)&&(a=
a.match(b))&&a.forEach(function(f){f&&e.test(f)&&(d=f)});return d},va=function(){return p.__awaiter(void 0,void 0,void 0,function(){var a,b,d,e,f;return p.__generator(this,function(h){switch(h.label){case 0:return a=N["default"].cardRoot.getElementsByClassName("sl-outfit-builder-carousel-cards-fit")[0],b=a.dataset||{},d=M["default"].getCarousel(a),e=ja["default"].setup(["getCarouselItems"]),f=function(k){var n=k.indexes;k=k.ids;return e.getCarouselItems(p.__assign(p.__assign({},b),{indexes:n,ids:k}))},
[4,d.initialized];case 1:return h.sent(),d.attachRemoteOperation(f),[2]}})})},R=function(){return p.__awaiter(void 0,void 0,void 0,function(){var a,b,d,e,f;return p.__generator(this,function(h){switch(h.label){case 0:a=A["default"].cardRoot.getElementsByClassName("sl-desktop-outfit-builder-card-sponsored-label")[0];if(!a)return[2];b=a.dataset;d=b.adFeedbackLabelId;e=b.adFeedbackAsin;if(!d||!e)return[2];f=function(){var k=d,n=[];n.push({asin:e,adCreativeIndex:0});return{adFeedbackLabelId:k,adCreativeMetaData:{adCreativeDetails:n}}};
return[4,ta(f)];case 1:return h.sent(),[2]}})})};K._operationNames=["getCarouselItems"];K.card=function(){return p.__awaiter(void 0,void 0,void 0,function(){function a(){var g=A["default"].cardRoot.classList.contains("sl-outfit-builder-carousel-cards-fit")?A["default"].cardRoot:A["default"].cardRoot.getElementsByClassName("sl-outfit-builder-carousel-cards-fit")[0];return{carousel:M["default"].getCarousel(g),carouselName:ia["default"].getCarousel(L.unscope(g)).getAttr("name")}}function b(){if(null!==
G["default"]&&"function"===typeof G["default"].getLocation){var g=G["default"].getLocation().href;g=ua(g,/\/dp\/([^\/?]*)|\/gp\/product\/([^\/?]*)|\/gp\/aw\/d\/([^\/?]*)/);g=Q(g)?g:"NONE"}else g="OB_ASIN_FAILED";var m=c["default"].$("#sl-outfit-builder-card").attr("data-slob-seed-asin"),r=JSON.parse(c["default"].$("#sl-outfit-builder-card").attr("data-p13n-global"));return{marketplaceId:r.marketplaceId,sessionId:r.session,requestId:r.requestId,pageASIN:g,seedASIN:m,deviceType:r.auiDeviceType}}function d(){return Object.assign?
Object.assign({},I):JSON.parse(JSON.stringify(I))}function e(){var g=d(),m=[];c["default"].$(".sl-outfit-builder-outfit").each(function(){var B=JSON.parse(c["default"].$(this).attr("data-slob-outfit-metadata"));m.push(B)});g.outfits=JSON.stringify(m);var r=c["default"].$("#outfit-builder-rec");g.numOutfitsReceived=r.length?parseInt(r.val()):0;r=c["default"].$("#outfit-builder-pre");g.numOutfitsPrepared=r.length?parseInt(r.val()):0;g.numOutfitsRendered=m.length;v.event(g,F,S)}function f(){var g=d(),
m=c["default"].$(".sl-outfit-builder-outfit");m=c["default"].$(m).attr("data-slob-outfit-metadata");g.outfit=m;v.event(g,F,T)}function h(){var g=c["default"].$("#outfit-builder-tooltip-container");0<g.length&&(u=c["default"].delay(function(){c["default"].fadeOut(g,500)},5E3),c["default"].declarative("outfit-builder-tooltip-dismiss","click",function(m){c["default"].fadeOut(g,0)}))}function k(){x=c["default"].delay(function(){c["default"].$(".outfit-builder-tooltip-container-remote-page-owner").each(function(g,
m){m.style.transition="opacity 500ms linear";m.style.opacity=0})},3E3)}function n(g){g&&(f(),0<c["default"].$(".sl-outfit-builder-outfit").length&&(w=c["default"].delay(function(){c["default"].$("#sl-outfit-builder-pagination").attr("aria-hidden","true");c["default"].$("#sl-outfit-builder-pagination").addClass("ob-heading-hide")},3E3)),h(),k())}function t(g,m){if(q){var r=c["default"].$("#sl-outfit-builder-carousel-container")[0];(new IntersectionObserver(function(B){m(B[0].isIntersecting)},{rootMargin:"0px",
threshold:g})).observe(r)}}function y(){var g=c["default"].$("#sl-outfit-builder-card");0<g.length&&(I=b(),g.delegate(".sl-ob-asin, .sl-color-swatch-inner-link, .sl-color-swatch-extra-link, .sl-carousel-cards-product-info-container","click",function(m){m=c["default"].$(m.srcElement).closest("img[data-slob-asin-metadata], li[data-slob-asin-metadata]").attr("data-slob-asin-metadata");var r=d();r.clickedAsinMetadata=m;v.event(r,F,U)}),e(),t(1,n),navigator.userAgent.match(/iPhone/i)&&(c["default"].$("#sl-outfit-builder-carousel-container li:not(:first-child)").attr("aria-hidden",
"true"),c["default"].$("#sl-outfit-builder-carousel-container li:not(:first-child)").children().attr("aria-hidden","true")))}var q,w,l,u,x,D,E,F,S,T,U,I,J,V,W;return p.__generator(this,function(g){switch(g.label){case 0:return q="undefined"===typeof IntersectionObserver?!1:!0,F="softlines-outfit-builder",S="softlines.outfitbuilder.OutfitRendered.7",T="softlines.outfitbuilder.OutfitViewed.6",U="softlines.outfitbuilder.OutfitASINClicked.3",J=a(),V=J.carouselName,W=J.carousel,[4,va()];case 1:return g.sent(),
c["default"].on("a:carousel:"+V+":change:loading",function(m){clearTimeout(l);c["default"].$("#outfit-builder-tooltip-container").addClass("aok-hidden");!1===m.newValue&&!0===m.oldValue&&(c["default"].$("#sl-outfit-builder-carousel-container .a-carousel-card").addClass("outfit-builder-fade"),l=c["default"].delay(function(){c["default"].$("#sl-outfit-builder-carousel-container .a-carousel-card").removeClass("outfit-builder-fade")},200))}),W.on("change:pageNumber",function(m){var r=c["default"].$("#sl-outfit-builder-carousel-container .a-carousel-card");
E=m.newPageNumber;clearTimeout(D);D=c["default"].delay(function(){f()},2E3);c["default"].$("#sl-outfit-builder-current-page").text(E);clearTimeout(w);clearTimeout(u);clearTimeout(x);clearTimeout(void 0);c["default"].$("#outfit-builder-tooltip-container").addClass("aok-hidden");c["default"].$(".outfit-builder-tooltip-container-remote-page-owner").each(function(wa,X){X.style.transition="opacity 500ms linear";X.style.opacity=1});k();var B=c["default"].$("#sl-outfit-builder-pagination");B.attr("aria-hidden",
"false");B.removeClass("ob-heading-hide");w=c["default"].delay(function(){B.attr("aria-hidden","true");B.addClass("ob-heading-hide")},3E3);r.addClass("outfit-builder-fade");clearTimeout(l);l=c["default"].delay(function(){R();r.removeClass("outfit-builder-fade")},200)}),y(),c["default"].on("toofanBtfLoaded",y),c["default"].on("a:pageUpdate",function(m){y();c["default"].loadDynamicImage(c["default"].$(".sl-ob-asin"))}),R(),[2]}})})}});
